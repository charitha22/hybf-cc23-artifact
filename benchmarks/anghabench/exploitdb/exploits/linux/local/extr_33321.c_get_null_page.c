#define NULL ((void*)0)
typedef unsigned long size_t;  // Customize by platform.
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;  // Either arithmetic or pointer type.
/* By default, we understand bool (as a convenience). */
typedef int bool;
#define false 0
#define true 1

/* Forward declarations */

/* Type definitions */

/* Variables and functions */
 int MAP_ANONYMOUS ; 
 int MAP_FIXED ; 
 int MAP_PRIVATE ; 
 scalar_t__ PER_SVR4 ; 
 int PROT_EXEC ; 
 int PROT_READ ; 
 int PROT_WRITE ; 
 int /*<<< orphan*/  error (char*) ; 
 int /*<<< orphan*/  free (void*) ; 
 void* mmap (int /*<<< orphan*/ *,int,int,int,int /*<<< orphan*/ ,int /*<<< orphan*/ ) ; 
 scalar_t__ mprotect (int /*<<< orphan*/ *,int,int) ; 
 scalar_t__ personality (int) ; 
 int /*<<< orphan*/  printf (char*) ; 

void* get_null_page(void)
{
	void *page;
	if ((personality(0xffffffff)) != PER_SVR4) 
	{
		page = mmap(NULL, 4096, PROT_READ | PROT_WRITE | PROT_EXEC, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, 0, 0);
		if (page != NULL) 
		{
			page = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, 0, 0);
			if (page != NULL) 
			{
				error("this box haz a motherfuckin mmap_min_addr-like stuff! burn it if u can !@#*");
			}
		}
	      else 
	      {
		      if (mprotect(NULL, 4096, PROT_READ | PROT_WRITE | PROT_EXEC) < 0)
		      {
		            free(page);
			      error("HELL! can't mprotect my null page !@#*. goto /dev/null !");
			}
		}
	}
	else
	{
	      // may be we are lucky today ... :)
	      page = mmap(NULL, 4096, PROT_READ | PROT_WRITE | PROT_EXEC, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, 0, 0);
		if (page != NULL) 
		{
			page = mmap(NULL, 4096, PROT_READ | PROT_WRITE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, 0, 0);
			if (page != NULL) 
			{
				error("this box haz a motherfuckin mmap_min_addr-like stuff! burn it if u can !@#*");
			}
		}
	      else 
	      {
		      if (mprotect(NULL, 4096, PROT_READ | PROT_WRITE | PROT_EXEC) < 0) // ... or not ! :(
		      {
		            free(page);
			      error("HELL! can't mprotect my null page !@#*. goto /dev/null !");
			}
		}
	}
	printf("\t\t+ Got null page\n");
	return page;
}